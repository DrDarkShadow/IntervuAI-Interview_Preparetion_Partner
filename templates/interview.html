{% extends 'base.html' %}

{% block content %}
<div id="interview-container" class="interview-container" data-session-id="{{ session_id }}">
    
    <!-- Left Panel: Interview Progress & Proctoring -->
    <div class="interview-sidebar">
        <div class="progress-panel">
            <h3>Session Progress</h3>
            <div id="progress-dots" class="progress-dots">
                <!-- Dots will be generated by JS -->
            </div>
        </div>
        <div class="proctoring-panel">
            <h3>Live Proctoring</h3>
            <div id="webcam-container" class="webcam-container">
                <video id="webcam-video" autoplay playsinline muted></video>
                <div id="proctoring-status-overlay">Initializing...</div>
            </div>
        </div>
    </div>

    <!-- Right Panel: Main Interaction -->
    <div class="interview-main">
        <div class="question-display-area">
            <h2 id="question-number">Question 1</h2>
            <p id="current-question-text">Loading question...</p>
        </div>

        <div class="chat-history-area">
            <div id="chat-history" class="chat-history">
                <!-- Chat messages will appear here -->
            </div>
        </div>

        <div class="controls-area">
            <div id="status-message" class="status-message">Recon AI is preparing your first question...</div>
            <div id="timer" class="timer">00:30</div>
            <div class="button-group">
                <button id="repeat-btn" class="control-button secondary-button">
                    <i class="fas fa-redo-alt"></i> Repeat
                </button>
                <button id="record-btn" class="control-button record-button">
                    <i class="fas fa-microphone"></i> Record Answer
                </button>
                <button id="skip-btn" class="control-button secondary-button">
                    <i class="fas fa-forward"></i> Skip
                </button>
            </div>
        </div>
    </div>

</div>

<!-- We'll need a separate JS file for the interview logic -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.min.js"></script>
<script src="{{ url_for('static', filename='js/interview.js') }}"></script>
{% endblock %}